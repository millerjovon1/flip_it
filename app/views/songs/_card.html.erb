<% @songs.each do |song| %>
  <div data-controller="playlist-popup">
    <div class="song-card" >
      <div class="song-card-infos" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(<%=song.photo.attached? ? cl_image_path(song.photo.key) : "https://source.unsplash.com/random/?<#{song.title.gsub(" ", " ")}" %>);">
        <h3><strong> Artist:</strong> <%= song.user.artist_name%></h3>
        <h3 class= "text-nowrap"> bpm: <%= song.bpm%>
          <br>
          <strong>Genre:</strong>
          <%= song.genre%>
          <br>
          <strong>Instruments:</strong> <%= song.instruments%></h3>
      </div>
      <div class="song-audio">
        <audio controls>
          <source src="<%=song.audio_file.url %>" type="audio/wav">
        </audio>
      </div>
      <div>
        <h3>Title:<%= song.title%></h3>
        <%= render 'songs/download_button', song: song %>
        <button data-action="click->playlist-popup#appear" class='btn btn-primary'>add</button>
        <%= render 'songs/playlist_form', song: song, crate_song: @crate_song %>
      </div>
    </div>
  </div>
<% end %>
